<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="lib/jquery.js"></script>
    <script src="lib/highcharts.js"></script>
</head>
<body>
<div id="container" style="min-width: 810px; height: 400px; margin: 0 auto"></div>
      <script>

          $(function () {
              $.getJSON('http://localhost:8010/totalUsage', function(data) {
                  var diskUsage = {
                      country_code : [],
                      series :[{
                          name:"disk usage",
                          data :[]
                      }]
                  };

                  for(key in data.diskUtils){
                      diskUsage.country_code.push(data.diskUtils[key].country_code);

                      var totalUsage = data.diskUtils[key].disk_usage.reduce(function(pre,next){
                          return pre+next;
                      })

                      diskUsage.series[0].data.push(totalUsage);


                  };
                  console.log(diskUsage);
                  $(function () {
                          $('#container').highcharts({
                              chart: {
                                  type: 'column'
                              },
                              title: {
                                  text: 'Disk usage : ' + data.totalUsage
                              },

                              xAxis: {
                                  categories:diskUsage.country_code,
                                  crosshair: true
                              },
                              yAxis: {
                                  min: 0,
                                  title: {
                                      text: 'Rainfall (mm)'
                                  }
                              },
//
                              plotOptions: {
                                  column: {
                                      pointPadding: 0.2,
                                      borderWidth: 0
                                  }
                              },
                              series: diskUsage.series
                          });
                  });

              })
          });





      </script>
</body>
</html>